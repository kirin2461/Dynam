# NCP-CPP CLI Commands Reference

Полный справочник команд для работы с NCP CLI.

## Содержание

- [Общая информация](#общая-информация)
- [Спуфинг сети](#спуфинг-сети)
- [Криптографические операции](#криптографические-операции)
- [Управление лицензиями](#управление-лицензиями)
- [Сетевые операции](#сетевые-операции)
- [Обход DPI](#обход-dpi)
---

## Общая информация

### Запуск CLI

```bash
# Windows
ncp.exe <command> [options]
# Linux/macOS
./ncp <command> [options]```

### Получение справки

```bash
ncp help
```

### Список доступных команд

| Команда | Описание |
|---------|----------|
| `run <iface>` | Запуск полного спуфинга (IP/MAC/DNS) |
| `stop` | Остановка спуфинга и восстановление |
| `status` | Показать текущий статус спуфинга |
| `rotate` | Ротация всех идентичностей |
| `crypto` | Криптографические операции |
| `license` | Управление лицензиями |
| `network` | Сетевые операции |
| `help` | Показать справку |
| `dpi` | Обход DPI (Deep Packet Inspection) |

---

## Спуфинг сети

> **Примечание:** Команды спуфинга требуют прав администратора/root.

### Запуск спуфинга

```bash
ncp run <interface>
```

**Описание:** Запускает полный спуфинг сети на указанном интерфейсе:
- Спуфинг IPv4 адреса
- Спуфинг IPv6 адреса
- Спуфинг MAC адреса
- Спуфинг DNS серверов

**Пример:**
```bash
# Запуск на конкретном интерфейсе
ncp run eth0

# Интерактивный выбор интерфейса
ncp run
```

**Пример вывода:**
```
Available network interfaces:
 [0] eth0
 [1] wlan0

Select interface (0-1): 0

==========================================
 NCP Network Spoofer - STARTING
==========================================

[*] Enabling spoofing on: eth0

[+] Spoofing ACTIVE:
    IPv4: 192.168.1.100
    IPv6: fe80::1234:5678
    MAC: 02:00:00:12:34:56
    DNS: spoofed

==========================================
 Press Ctrl+C to stop and restore
==========================================
```

### Остановка спуфинга

```bash
ncp stop
```

**Описание:** Останавливает спуфинг и восстанавливает оригинальные сетевые настройки.

**Пример вывода:**
```
[*] Stopping and restoring...
[+] Original settings restored!
```

### Статус спуфинга

```bash
ncp status
```

**Описание:** Отображает текущий статус спуфинга.

**Пример вывода (активен):**
```
Spoofing: ACTIVE
    IPv4: 192.168.1.100
    IPv6: fe80::1234:5678
    MAC: 02:00:00:12:34:56
```

**Пример вывода (неактивен):**
```
Spoofing: INACTIVE
```

### Ротация идентичностей

```bash
ncp rotate
```

**Описание:** Генерирует новые случайные значения для всех спуфированных параметров.

**Пример вывода:**
```
[*] Rotating all identities...
[+] New identities:
    IPv4: 10.0.0.55
    MAC: 02:00:00:ab:cd:ef
```

---

## Криптографические операции

### Генерация ключевой пары Ed25519

```bash
ncp crypto keygen
```

**Описание:** Генерирует криптографическую пару ключей Ed25519:
- Публичный ключ: 32 байта
- Секретный ключ: 64 байта

**Пример вывода:**
```
Public: a1b2c3d4e5f6...
Secret: 1234567890ab...
```

### Генерация случайных байтов

```bash
ncp crypto random <size>
```

**Параметры:**
- `<size>` - количество байтов для генерации

**Примеры:**
```bash
# Генерация 32 случайных байтов (для ключа шифрования)
ncp crypto random 32

# Генерация 16 байтов (для IV/nonce)
ncp crypto random 16
```

---

## Управление лицензиями

### Получение Hardware ID (HWID)

```bash
ncp license hwid
```

**Описание:** Возвращает уникальный идентификатор оборудования системы.

**Пример вывода:**
```
HWID: a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
```

### Информация о лицензии

```bash
ncp license info
```

**Описание:** Отображает информацию о текущей лицензии.

**Пример вывода:**
```
License: Valid
```

или

```
License: Invalid
```

---

## Сетевые операции

### Список сетевых интерфейсов

```bash
ncp network interfaces
```

**Описание:** Отображает все доступные сетевые интерфейсы в системе.

**Пример вывода:**
```
[0] eth0
[1] wlan0
[2] lo
```

### Сетевая статистика

```bash
ncp network stats
```

**Описание:** Отображает статистику сетевого трафика.

**Пример вывода:**
```
Sent: 1234567 Recv: 9876543
```

---

## Обход DPI

Модуль обхода Deep Packet Inspection для разблокировки сайтов.

### Запуск обхода DPI (CLI)

```bash
ncp dpi [options]
```

**Базовые опции:**
- `--mode <mode>` - Режим работы: `proxy`, `driver` или `passive`
- `--port <port>` - Порт локального прокси (по умолчанию: 8080)
- `--target <host>` - Целевой хост (например: `github.com`) для proxy-режима
- `--target-port <port>` - Целевой порт (по умолчанию: 443)

**Параметры фрагментации и обхода:**
- `--fragment-size <bytes>` / `--fragment <bytes>` - размер фрагмента TCP
- `--split-position <bytes>` - позиция первого разделения ClientHello
- `--split-at-sni` / `--no-split-at-sni` - включить/выключить разделение по полю SNI
- `--enable-fake` / `--disable-fake` - включить/выключить фейковые пакеты с низким TTL
- `--enable-disorder` / `--disable-disorder` - включить/выключить искусственное «расстройство» порядка пакетов

**Пример:**
```bash
# Запуск в режиме прокси для HTTPS‑сайтов
ncp dpi --mode proxy --port 8080 --target github.com --target-port 443

# Базовый режим драйвера (Linux, требует root и NFQUEUE)
ncp dpi --mode driver
```

### RuNet‑пресеты

Для российских провайдеров добавлены готовые профили:

- `RuNet-Soft` — мягкий профиль: лёгкая фрагментация и разделение по SNI.
- `RuNet-Strong` — агрессивный профиль: сильная фрагментация + расстройство порядка.

Выбор пресета:

```bash
# Мягкий режим для большинства РУ‑провайдеров
ncp dpi --mode proxy --port 8080 --target github.com --preset RuNet-Soft

# Агрессивный режим для сильной фильтрации
ncp dpi --mode proxy --port 8080 --target github.com --preset RuNet-Strong
```

### Остановка обхода

```bash
ncp dpi stop
```

### Статус

```bash
ncp dpi status
```

------

## Коды возврата

| Код | Описание |
|-----|----------|
| 0 | Успешное выполнение |
| 1 | Неизвестная команда |

---

## Требования

- Права администратора/root для команд спуфинга
- Установленные зависимости: libsodium, openssl, sqlite3, libpcap
- Qt6 для GUI приложения (опционально)
